<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="A system for controling exhibit components">
    <meta name="author" content="Morgan Rehnberg">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="icon/green.ico">

    <link rel="stylesheet" href="css/bootstrap.min.css">

    <title></title>

    <style>
      pre {
        background-color: #e8eded;
        padding-top: 10px;
        padding-bottom: 10px;
        margin-left: 10px;
        padding-left: 10px;
        padding-right: 10px;
        margin-right: 10px;
      }
      .componentContentButton {
        width: 80% !important;
        overflow-wrap: break-word;
      }
      .componentStatusButton {
        overflow-wrap: break-word;
        width: 75%;
      }
      .container {
        max-width: 1600px;
      }
      .contentThumbnail {
        width: 100%;
      }
      .dropdown-item {
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .handCursor {
        cursor: pointer;
      }
      .schedule-date-specific {
        background-color: rgba(91, 192, 222, 0.2);
      }

      #componentAvailableContentList {
        max-height: 25vh;
        min-height: 15vh;
        overflow-y: auto;
      }
      #issueMediaUploadFilename {
        overflow-wrap: break-word!important;
      }
    </style>
  </head>

  <body>

    <main role="main" class="container mb-4 pt-1 pt-md-3 px-md-5">

      <div class="row mt-2 mb-2">
        <div class="col-auto">
          <H4><div id="galleryNameField"></div></H4>
          <H1><div id="exhibitNameField"></div></H1>
        </div>
      </div>

      <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-components-tab" data-toggle="tab" href="#nav-components" role="tab" aria-controls="nav-components" aria-selected="true">Components</a>
          <a class="nav-item nav-link" id="nav-schedule-tab" data-toggle="tab" href="#nav-schedule" role="tab" aria-controls="nav-schedule" aria-selected="false">Schedule</a>
          <a class="nav-item nav-link" id="nav-issues-tab" data-toggle="tab" href="#nav-issues" role="tab" aria-controls="nav-issues" aria-selected="false">Issues</a>
          <a class="nav-item nav-link" id="nav-settings-tab" data-toggle="tab" href="#nav-settings" role="tab" aria-controls="nav-settings" aria-selected="false">Settings</a>
          <a class="nav-item nav-link" id="nav-help-tab" data-toggle="tab" href="#nav-help" role="tab" aria-controls="nav-help" aria-selected="false">Help</a>
        </div>
      </nav>

      <div class="tab-content" id="nav-tabContent">

        <div class="tab-pane fade show active" id="nav-components" role="tabpanel" aria-labelledby="nav-components-tab">

          <div class="modal" tabindex="-1" role="dialog" id="componentInfoModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header w-100 pr-0">
                  <div class='row modal-title align-items-middle w-100'>
                    <div class='col-8'>
                      <h4 id="componentInfoModalTitle" style="word-break: break-all;"></h4>
                    </div>
                    <div class='col-4 pr-0'>
                      <div class="dropdown float-right">
                        <button class="btn btn-sm btn-info dropdown-toggle" type="button" id="constellationComponentIdButton" data-toggle="dropdown" aria-expanded="false">
                          Voting Kiosk
                        </button>
                        <div class="dropdown-menu" aria-labelledby="constellationComponentIdButton">
                          <div id="componentInfoModalIPAddressGroup">
                            <span class="dropdown-header pl-3 pb-0">IP address</span>
                            <span id="componentInfoModalIPAddress" class="dropdown-item-text pl-3"></span>
                          </div>
                          <div id="componentInfoModalHelperIPAddressGroup">
                            <span class="dropdown-header pl-3 pb-0">Helper IP address</span>
                            <span id="componentInfoModalHelperIPAddress" class="dropdown-item-text pl-3"></span>
                          </div>
                          <div id="componentInfoModalOperatingSystemGroup">
                            <span class="dropdown-header pl-3 pb-0">Operating system</span>
                            <span id="componentInfoModalOperatingSystem" class="dropdown-item-text pl-3"></span>
                          </div>
                          <div id="componentInfoModalBrowserGroup">
                            <span class="dropdown-header pl-3 pb-0">Browser</span>
                            <span id="componentInfoModalBrowser" class="dropdown-item-text pl-3"></span>
                          </div>
                          <div id="componentInfoModalLastContactGroup">
                            <span class="dropdown-header pl-3 pb-0">Last contact</span>
                            <span id="componentInfoModalLastContact" class="dropdown-item-text pl-3"></span>
                          </div>
                          
                        </div>
                      </div>
                    </div>
                    <div class="col-12">
                      <div id="componentInfoModalDescription">This is the description</div>
                    </div>
                  </div>
                </div>
                <div class="modal-body">

                  <div class='row align-items-end' id="contentUploadSystemStatsView">
                    <div class='col-4'>
                      <strong id="contentUploadDiskSpaceFree"></strong>
                      <div class="progress" style="height: 20px;">
                        <div id="contentUploadDiskSpaceUsedBar" class="progress-bar bg-success" role="progressbar" style="width: 70%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="contentUploadDiskSpaceFreeBar" class="progress-bar bg-secondary" role="progressbar" style="width: 30%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>

                    <div class='col-4'>
                      <strong id="contentUploadCPUUsed"></strong>
                      <div class="progress" style="height: 20px;">
                        <div id="contentUploadCPUUsedBar" class="progress-bar bg-success" role="progressbar" style="width: 70%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="contentUploadCPUFreeBar"class="progress-bar bg-secondary" role="progressbar" style="width: 30%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>

                    <div class='col-4'>
                      <strong id="contentUploadRAMUsed"></strong>
                      <div class="progress" style="height: 20px;">
                        <div id="contentUploadRAMUsedBar" class="progress-bar bg-success" role="progressbar" style="width: 60%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        <div id="contentUploadRAMFreeBar" class="progress-bar bg-secondary" role="progressbar" style="width: 40%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                      </div>
                    </div>
                    <hr>
                  </div>

                  <ul class="nav nav-tabs mt-3" id="componentInfoModalTabList" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" id="componentInfoModalContentTabButton" data-toggle="tab" href="#componentInfoModalContentTab" role="tab" aria-controls="Content" aria-selected="true">Content</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="componentInfoModalMaintenanceTabButton" data-toggle="tab" href="#componentInfoModalMaintenanceTab" role="tab" aria-controls="Maintenance" aria-selected="false">Maintenance</a>
                    </li>
                  </ul>

                  <div class="tab-content" id="componentInfoModalTabContainer">
                    <div class="tab-pane fade show active" id="componentInfoModalContentTab" role="tabpanel" aria-labelledby="componentInfoModalContentTabButton">
                      <div class="row mt-3" id="componentInfoConnectingNotice">
                        <div class='col-8 offset-2'>
                          <center>
                            <H5 id="componentInfoConnectionStatusInPrograss">Connecting to component...</H5>
                            <H5 id="componentInfoConnectionStatusFailed">Unable to connect to component</H5>
                          </center>
                        </div>
                      </div>
                      <div id="componentAvailableContentRow" class="row">
                        <div class="col-6 mt-3">
                          <H5>Available content</H5>
                        </div>
                        <div class="col-6 mt-3 d-flex justify-content-end">
                          <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="componentInfoModalThumbnailCheckbox" checked>
                            <label class="form-check-label" for="componentInfoModalThumbnailCheckbox">Thumbnails</label>
                          </div>
                        </div>
                        <div class="col-12 w-100">
                          <div class="row" id="componentAvailableContentList"></div>
                        </div>
                        <div class='col-12'>
                          <button type="button" class="btn btn-primary mt-2" id="componentSaveConfirmationButton">Save changes</button>
                        </div>

                      </div>

                      <div id="componentcontentUploadInterface" class="form-group mt-3 mb-0">
                        <label for="componentContentUpload"><H5>Upload new content</H5></label>
                        <div class="row align-middle d-flex align-items-center">
                          <div class="col-8">
                            <label class="btn btn-outline-secondary mw-100">
                              <span id="componentContentUploadfilename" style="overflow-wrap: break-word!important;">Choose file</span>
                              <input hidden type="file" class="form-control-file" id="componentContentUpload">
                            </label>
                          </div>
                          <div class="col-4">
                            <button id="contentUploadSubmitButton" class='btn btn-block btn-outline-primary'>Upload</button>
                          </div>

                          <div class='col-12 mt-3' id='contentUploadProgressBarContainer'>
                            <div class="progress" style="height: 25px;">
                              <div id='contentUploadProgressBar' class="progress-bar" role="progressbar" style="width: 30%; font-size: large;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                          </div>
                          <div class='col-12 text-danger mt-2' id='uploadOverwriteWarning'>Warning: this upload will overwrite a file of the same name.</div>
                          <div class='col-12 text-danger mt-2' id='contentUploadEqualSignWarning'>Filenames cannot contain the equal sign (=).</div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="componentInfoModalMaintenanceTab" role="tabpanel" aria-labelledby="componentInfoModalMaintenanceTabButton">
                      <div class="row mt-3">
                        <div class='col-12 col-md-6'>
                          <a id='AnyDeskButton' href="" class='btn btn-primary d-sm-none d-none d-md-inline'>Anydesk</a>
                          <a id='AnyDeskLabel' href="" class='btn btn-primary d-sm-inline d-md-none'>Anydesk</a>
                          <div class="form-group mt-2">
                            <label for="componentInfoModalMaintenanceStatusSelector">Maintenance status</label>
                            <select class="form-control" id="componentInfoModalMaintenanceStatusSelector">
                              <option>On floor, working</option>
                              <option>On floor, not working</option>
                              <option>Off floor, working</option>
                              <option>Off floor, not working</option>
                            </select>
                          </div>
                        </div>
                        <div class='col-12 col-md-6 mt-2'>
                          <label>Maintenance history</label>
                          <div class="progress" style="height: 35px;">
                            <div id="maintenanceHistoryWorkingBar" class="progress-bar bg-success" role="progressbar" style="width: 80%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">Working</div>
                            <div id="maintenanceHistoryNotWorkingBar" class="progress-bar bg-danger" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">Not working</div>
                          </div>
                        </div>
                        <div class='col-12 mt-2'>
                          <div class="form-group">
                            <label for="componentInfoModalMaintenanceNote">Notes</label>
                            <textarea class="form-control" id="componentInfoModalMaintenanceNote" rows="3"></textarea>
                          </div>
                        </div>
                        <div class='col-12 mt-2'>
                          <button id='componentInfoModalMaintenanceSaveButton' class='btn btn-primary'>Save changes</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">

                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="fileDeleteModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content" style="border:black 1px solid;">
                <div class="modal-header">
                  <h4 class="modal-title" id="fileDeleteModalTitle">Are you sure?</h4>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-auto" id="fileDeleteModalText"></div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" id="fileDeleteConfirmationButton">Delete File</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="projectorInfoModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header w-100">
                  <div class='row modal-title align-items-middle w-100'>
                    <div class='col-8'>
                      <h4 id="projectorInfoModalTitle"></h4>
                    </div>
                    <div class='col-4'>
                      <div id="projectorInfoModalIPAddress" align="right"></div>
                    </div>
                    <div class="col-12">
                      <div id="projectorInfoModalDescription"></div>
                    </div>
                  </div>
                </div>
                <div class="modal-body">
                  <table class="table table-striped">
                    <tbody>
                      <tr>
                        <th scope="row">Power state</th>
                        <td><div id="projectorInfoPowerState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Lamp hours</th>
                        <td><div id="projectorInfoLampHours"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Lamp state</th>
                        <td><div id="projectorInfoLampState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Fan state</th>
                        <td><div id="projectorInfoFanState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Temperature state</th>
                        <td><div id="projectorInfoTempState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Filter state</th>
                        <td><div id="projectorInfoFilterState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Cover state</th>
                        <td><div id="projectorInfoCoverState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Other</th>
                        <td><div id="projectorInfoOtherState"></div></td>
                      </tr>
                      <tr>
                        <th scope="row">Model</th>
                        <td><div id="projectorInfoModel"></div></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <div class="row" id="errorDisplayRow">
          </div>
          <div class="row" id="componentGroupsRow">
          </div>
        </div>

        <div class="tab-pane fade" id="nav-schedule" role="tabpanel" aria-labelledby="nav-schedule-tab">

          <div class="modal" tabindex="-1" role="dialog" id="scheduleEditModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 id="scheduleEditModalTitle" class="modal-title">Edit action</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div id="scheduleEditScopeAlert" class="alert bg-info text-light">This change will affect all Wednesdays</div>
                  <form id="scheduleEditForm" onsubmit="event.preventDefault();">
                    <div class="form-group">
                      <div class="row">
                        <div class="col-4">
                          <label for="scheduleActionTimeInput">Time</label>
                          <input type="text" class="form-control" id="scheduleActionTimeInput" placeholder="e.g., 9:30 AM">
                        </div>
                        <div class="col-4">
                          <label for="scheduleActionSelector">Action</label>
                          <select class="form-control" id="scheduleActionSelector">
                            <option value="power_on">Power on</option>
                            <option value="power_off">Power off</option>
                            <option value="refresh_page">Refresh components</option>
                            <option value="restart">Restart components</option>
                            <option value="set_exhibit">Set exhibit</option>
                            <option value="set_content">Set content</option>
                          </select>
                        </div>
                        <div class="col-4">
                          <label id="scheduleTargetSelectorLabel" for="scheduleTargetSelector">Target</label>
                          <select class="form-control" id="scheduleTargetSelector">
                          </select>
                        </div>
                        <div class="col-4">
                          <label id="scheduleValueSelectorLabel" for="scheduleValueSelector">Value</label>
                          <select multiple class="form-control" id="scheduleValueSelector">
                          </select>
                        </div>
                      </div>
                    </div>
                  </form>
                  <div id="scheduleEditErrorAlert" class="alert bg-danger text-light w-100" style="display: none;"></div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" mr-auto id="scheduleEditDeleteActionButton">Delete action</button>
                  <button type="button" class="btn btn-primary ml-auto" id="scheduleEditSubmitButton">Save changes</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="row mt-4">
            <div class='col-12'>
              <h4><b>Next scheduled action: </b><span id="Schedule_next_event"></span></h4>
            </div>
            <div class='col-12 col-sm-6 col-md-4 col-lg-3 col-md-2 mb-2'>
              <button id='refreshScheduleButton' class='btn btn-primary w-100'>Refresh schedule</button>
            </div>
            <div id='dateSpecificScheduleAlert' class="col-12 col-sm-auto alert schedule-date-specific my-auto" role="alert">
              Date-specific schedule
            </div>
          </div>

          <div id='scheduleContainer' class='row mt-2'>
          </div>
        </div>

        <div class="tab-pane fade" id="nav-issues" role="tabpanel" aria-labelledby="nav-issues-tab">

          <div class="modal" tabindex="-1" role="dialog" id="issueEditModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 id="issueEditModalTitle" class="modal-title">Create Issue</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="scheduleEditForm" onsubmit="event.preventDefault();">
                    <div class="form-group">
                      <div class="row">
                        <div class="col-8">
                          <label for="issueTitleInput">Title</label>
                          <input type="text" class="form-control" id="issueTitleInput" placeholder="e.g., Fix button">
                        </div>
                        <div class="col-4">
                          <label for="issuePrioritySelector">Priority</label>
                          <select class="form-control" id="issuePrioritySelector">
                            <option value='low'>Low</option>
                            <option value='medium'>Medium</option>
                            <option value='high'>High</option>
                          </select>
                        </div>
                        <div class="col-12 mt-2">
                          <label for="issueDescriptionInput">Description</label>
                          <textarea class="form-control" id="issueDescriptionInput" placeholder="e.g., The red button is loose."></textarea>
                        </div>
                        <div class="col-6 mt-2">
                          <label for="issueRelatedComponentsSelector">Related components</label>
                          <select class="form-control" id="issueRelatedComponentsSelector" multiple>
                          </select>
                        </div>
                        <div class="col-6 mt-2">
                          <label for="issueAssignedToSelector">Assigned to</label>
                          <select class="form-control" id="issueAssignedToSelector" multiple>
                          </select>
                        </div>
                        <div class='col-12 mt-2'>
                          <label id="issueMediaModalLabel" for="issueMediaUpload">Add image</label>
                        </div>
                        <div id="issueMediaUploadCol" class='col-8'>
                          <label class="btn btn-outline-secondary text-wrap" style="max-width: 100%;">
                            <span id="issueMediaUploadFilename" class="w-100">Choose file</span>
                            <input hidden type="file" accept="image/*" class="form-control-file" id="issueMediaUpload">
                          </label>
                        </div>
                        <div id="issueMediaViewCol" class='col-8'>
                          <button id="issueMediaViewFromModal" class='btn btn-outline-secondary'>View image</button>
                          <button id="issueMediaDeleteButton" class='btn btn-outline-danger'>Remove image</button>
                        </div>
                        <div class="col-4">
                          <button id="issueMediaUploadSubmitButton" class='btn btn-block btn-outline-primary'>Upload</button>
                        </div>
                        <div class='col-12 mt-2' id='issueMediaUploadProgressBarContainer'>
                          <div class="progress" style="height: 25px;">
                            <div id='issueMediaUploadProgressBar' class="progress-bar" role="progressbar" style="width: 30%; font-size: large;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                          </div>
                        </div>
                        <div class='col-12 text-danger mt-2' id='issueMediaUploadEqualSignWarning'>Filenames cannot contain the equal sign (=).</div>
                        <div class='col-12 text-danger mt-2' id='issueMediaUploadHEICWarning'>HEIC images are not supported. Please convert to JPG or PNG.</div>
                      </div>
                    </div>
                  </form>
                <div class="modal-footer">
                  <button id="issueEditSubmitButton" type="button" class="btn btn-primary ml-auto">Save changes</button>
                  <button id="issueEditCancelButton" type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>
          </div>

          <div id='issueTabButtons' class='row mt-4'>
            <div class='col-12'>
              <button id="createIssueButton" class='btn btn-primary'>Create issue</button>
            </div>
            <div class='col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mt-3'>
              <label>Priority</label>
              <select id="issueListFilterPrioritySelect" class='form-control'>
                <option value="all">All</option>
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
            <div class='col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 mt-3'>
              <label>Assigned to</label>
              <select id="issueListFilterAssignedToSelect" class='form-control'>
              </select>
            </div>
            <div class='col-12'>
              <div id='issuesRow' class='row mt-3'></div>
            </div>
          </div>
          <div class='row mt-4'>
            <div class='col-12'>
              <H3>Maintenance overview</H3>
              <button id="refreshMaintenanceRecordsBUtton" class='btn btn-primary'>Refresh</button>
            </div>
            <div class='col-12 col-md-6'>
              <div class='col-12 mt-3 pb-3 pt-3' style="background-color: #b4ffb3;">
                <H4>On the floor and working</H4>
                <div id='MaintenanceOverviewOnFloorWorkingPane' class='row'>
                </div>
              </div>
            </div>
            <div class='col-12 col-md-6'>
              <div class='col-12 mt-3 pb-3 pt-3' style="background-color: #fab8af;">
                <H4>On the floor and not working</H4>
                <div id='MaintenanceOverviewOnFloorNotWorkingPane' class='row'>
                </div>
              </div>
            </div>
            <div class='col-12 col-md-6'>
              <div class='col-12 mt-3 pb-3 pt-3' style="background-color: #b1ddfc;">
                <H4>Off the floor and working</H4>
                <div id='MaintenanceOverviewOffFloorWorkingPane' class='row'>
                </div>
              </div>
            </div>
            <div class='col-12 col-md-6'>
              <div class='col-12 mt-3 pb-3 pt-3' style="background-color: #fcdba9;">
                <H4>Off the floor and not working</H4>
                <div id='MaintenanceOverviewOffFloorNotWorkingPane' class='row'>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="nav-settings" role="tabpanel" aria-labelledby="nav-settings-tab">

          <div class="modal" tabindex="-1" role="dialog" id="changeExhibitModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Are you sure?</h5>
                </div>
                <div class="modal-body">
                  Changing the exhibit will be immediately visible to guests and the changing process may be unsightly for up to a minute.
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" id="exhibitChangeConfirmationButton">Change exhibit</button>
                  <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="deleteExhibitModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Are you sure?</h5>
                </div>
                <div class="modal-body">
                  Deleting an exhibit cannot be undone.
                </div>
                <div class="modal-footer">
                  <button id="deleteExhibitButton" type="button" class="btn btn-danger">Delete exhibit</button>
                  <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="deleteTrackerDataModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Are you sure?</h5>
                </div>
                <div class="modal-body">
                  Deleting the data cannot be undone. To continue, please retype the name of the data to be deleted:
                  <center><div id='deleteTrackerDataModalDeletedName' class='h4 mt-1'>TEST</div></center>
                  <center><input type="text" id='deleteTrackerDataModalDeletedInput'></input></center>
                  <p id='deleteTrackerDataModalSpellingError' class='text-danger mt-2'>Your typed name does not match. Are you sure you want to delete these data?</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-danger" id="deleteTrackerDataFromModalButton">Delete data</button>
                  <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="deleteTrackerTemplateModal">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Are you sure?</h5>
                </div>
                <div class="modal-body">
                  Deleting a template cannot be undone.
                </div>
                <div class="modal-footer">
                  <button id="deleteTrackerTemplateFromModalButton" type="button" class="btn btn-danger">Delete template</button>
                  <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="editTrackerTemplateModal" >
            <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: min(95%, 1000px); width: min(95%, 1000px);">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 id="editTrackerTemplateModalTitle" class="modal-title h2">Edit template: TEST</h5>
                </div>
                <div class="modal-body" style="height: calc(70vh);">
                  <div id='editTrackerCurrentWidgets' class='row h-100'>
                    <div class='col-4 col-sm-3 col-md-2 border-right'>
                      <H3>Widgets</H3>
                      <div id='editTrackerAvailableWidgets'>
                        <button class="btn btn-secondary w-100 mt-1" id="editTrackerTemplateModalAddCounterButton">Counter</button>
                        <button id="editTrackerTemplateModalAddDropdownButton" class="btn btn-secondary w-100 mt-1">Dropdown</button>
                        <button id="editTrackerTemplateModalAddNumberButton" class="btn btn-secondary w-100 mt-1">Number</button>
                        <button id="editTrackerTemplateModalAddSliderButton" class="btn btn-secondary w-100 mt-1">Slider</button>
                        <button id="editTrackerTemplateModalAddTextButton" class="btn btn-secondary w-100 mt-1">Text</button>
                        <button id="editTrackerTemplateModalAddTimerButton" class="btn btn-secondary w-100 mt-1">Timer</button>
                      </div>
                    </div>
                    <div class='col-4 col-sm-5 col-md-6 border-right border-left h-100'>
                      <H3>Current layout</H3>
                      <i>The number of widgets per row will depend on which device Flexible Tracker is used on.</i>
                      <div id='editTrackerTemplateModalCurrentLayout' class='row' style="max-height: 85%; overflow-y: auto;">
                      </div>
                    </div>
                    <div class='col-4 border-left h-100 d-flex flex-column' style="max-height: 100%; overflow-y: auto;">
                      <H3>Edit properties</H3>
                      <div id='editTrackerTemplateNameInputGroup'>
                        <label for='editTrackerTemplateNameInput'>Name</label>
                        <input id="editTrackerTemplateNameInput" type="text" class='form-control editTrackerTemplateInputField'></input>
                      </div>

                      <div id='editTrackerTemplateLabelInputGroup'>
                        <hr>
                        <label for='editTrackerTemplateLabelInput'>Label</label>
                        <input id="editTrackerTemplateLabelInput" type="text" class='form-control editTrackerTemplateInputField'></input>
                      </div>

                      <div id='editTrackerTemplateMultipleInputGroup' class='editTrackerTemplateInputGroup'>
                        <hr>
                        <label>Multiple</label>
                        <br>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input editTrackerTemplateInputField" type="radio" name="editTrackerTemplateMultipleInput" id="editTrackerTemplateMultipleInputTrue" value="true">
                          <label class="form-check-label" for="editTrackerTemplateMultipleInputTrue">True</label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input editTrackerTemplateInputField" type="radio" name="editTrackerTemplateMultipleInput" id="editTrackerTemplateMultipleInputFalse" value="false" checked>
                          <label class="form-check-label" for="editTrackerTemplateMultipleInputFalse">False</label>
                        </div>
                        <p><i>Allow more than one option to be selected.</i></p>
                      </div>

                      <div id='editTrackerTemplateOptionsInputGroup' class='editTrackerTemplateInputGroup'>
                        <hr>
                        <label for='editTrackerTemplateOptionsInput'>Options</label>
                        <input id="editTrackerTemplateOptionsInput" type="text" class='form-control editTrackerTemplateInputField'></input>
                        <p><i>Separate each option with a comma.</i></p>
                      </div>

                      <div id='editTrackerTemplateSliderInputGroup' class='editTrackerTemplateInputGroup'>
                        <hr>
                        <label>Slider options</label>
                        <div class='row no-gutters'>
                          <div class='col-6 col-lg-3 px-1'>
                            <label for='editTrackerTemplateSliderInputMin'>Min</label>
                            <input id="editTrackerTemplateSliderInputMin" type="number" class='form-control editTrackerTemplateInputField' value=1></input>
                          </div>
                          <div class='col-6 col-lg-3 px-1'>
                            <label for='editTrackerTemplateSliderInputMax'>Max</label>
                            <input id="editTrackerTemplateSliderInputMax" type="number" class='form-control editTrackerTemplateInputField' value=5></input>
                          </div>
                          <div class='col-6 col-lg-3 px-1'>
                            <label for='editTrackerTemplateSliderInputStep'>Step</label>
                            <input id="editTrackerTemplateSliderInputStep" type="number" class='form-control editTrackerTemplateInputField' value=1></input>
                          </div>
                          <div class='col-6 col-lg-3 px-1'>
                            <label for='editTrackerTemplateSliderInputStart'>Start</label>
                            <input id="editTrackerTemplateSliderInputStart" type="number" class='form-control editTrackerTemplateInputField' value=3></input>
                          </div>
                        </div>
                      </div>

                      <div id='editTrackerTemplateExclusiveInputGroup' class='editTrackerTemplateInputGroup'>
                        <hr>
                        <label>Exclusive</label>
                        <br>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input editTrackerTemplateInputField" type="radio" name="editTrackerTemplateExclusiveInput" id="editTrackerTemplateExclusiveInputTrue" value="true">
                          <label class="form-check-label" for="editTrackerTemplateExclusiveInputTrue">True</label>
                        </div>
                        <div class="form-check form-check-inline">
                          <input class="form-check-input editTrackerTemplateInputField" type="radio" name="editTrackerTemplateExclusiveInput" id="editTrackerTemplateExclusiveInputFalse" value="false" checked>
                          <label class="form-check-label" for="editTrackerTemplateExclusiveInputFalse">False</label>
                        </div>
                        <p><i>Starting an exclusive timer stops the others.</i></p>
                      </div>

                      <div id='editTrackerTemplateLinesInputGroup' class='editTrackerTemplateInputGroup'>
                        <hr>
                        <label for='editTrackerTemplateLinesInput'>Lines</label>
                        <input id="editTrackerTemplateLinesInput" type="number" class='form-control editTrackerTemplateInputField' value=5></input>
                        <p><i>Number of lines visible.</i></p>
                      </div>
                      <button id="editTrackerTemplateModalDeleteWidgetButton" class='btn btn-danger w-100 mt-4 mt-auto'>Delete</button>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button id="editTrackerTemplateModalSubmitChangesButton" type="button" class="btn btn-primary">Save</button>
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
              </div>
            </div>
          </div>

          <div class="modal" tabindex="-1" role="dialog" id="editGalleryConfigModal" >
            <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: min(95%, 1000px); width: min(95%, 1000px);">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title h2">Edit Gallery Configuration</h5>
                </div>
                <div class="modal-body" style="height: calc(70vh);">
                  <div class='row h-100'>
                    <div class='col-6 border-left' style="overflow-y: auto; height: 90%;">
                      <H3>Help</H3>
                      <p>
                        The text area on the right displays the current settings for this Control Server. The settings are formatted as an INI file. Each word in [brackets] defines a section of the settings. This help text will describe the possible sections and settings.
                      </p>
                      <p>
                        A few notes about editing INI files:
                        <ul>
                          <li>The bracketed section headers and keys must be capitalized as shown.</li>
                          <li>The general format is: <code>key = value</code>, where <code>key</code> is the name of a setting and <code>value</code> is what it should be set to.</li>
                          <li>You may not use the equals sign (=) except to separate keys and values.</li>
                        </ul>
                      </p>
                  
                      <H5><b>[CURRENT]</b></H5>
                      This section contains some basic configuration information. 
                      <table>
                        <tr>
                          <th>Key</th>
                          <th>Value</th>
                          <th>Required?</th>
                        </tr>
                        <tr>
                          <td>current_exhibit</td>
                          <td>This should be managed by Constellation, not set directly.</td>
                          <td>Yes</td>
                        </tr>
                        <tr>
                          <td>server_ip_address</td>
                          <td>The static IP address of this Control Server. E.g., 10.8.1.21</td>
                          <td>Yes</td>
                        </tr>
                        <tr>
                          <td>server_port</td>
                          <td>The port of this Control Server. E.g., 8082</td>
                          <td>Yes</td>
                        </tr>
                        <tr>
                          <td>assignable_staff</td>
                          <td>A comma-separated list of people, departments, etc. who can be assigned issues. E.g., Exhibits, Facilities, Housekeeping</td>
                          <td>No</td>
                        </tr>
                        <tr>
                          <td>gallery_name</td>
                          <td>A user-defined name for where this Control Server is operating. E.g., Adventure Science Center</td>
                          <td>No</td>
                        </tr>
                        <tr>
                          <td>reboot_time</td>
                          <td>The time of day that Control Server (the app) should reboot. If you use this, make sure you have set a watchdog process to restart the server. E.g., 1 AM</td>
                          <td>No</td>
                        </tr>
                      </table>

                      <br>
                      <H5><b>[PJLINK_PROJECTORS]</b></H5>
                      This section configures projectors using the PJLink protocol. This is the preferred method for managing projectors. 
                      <br><br>
                      <p>
                        <b>Basic format</b>
                        <br>
                        <code>ID = Static IP address</code>  
                      </p>
                      <p>
                        <b>Projectors with passwords</b>
                        <br>
                        <code>ID = Static IP address, password</code>  
                      </p>
                      <p>
                        <b>Example</b>
                        <br>
                        <code>Atrium Marquee = 10.8.1.41, securePass</code>  
                      </p>
                    </div>
                    <div class='col-6 border-right' style="height: 90%;">
                      <H3>Configuration</H3>
                      <div class="form-group">
                        <textarea class="form-control h-100" id="editGalleryConfigTextArea" rows="20" spellcheck="false" ></textarea>
                      </div>
                    </div>
                    <div class="col-12 mt-3" style="height: 10%;">
                      <div id="galleryConfigEditModalErrorMessage" class="alert alert-danger mt-2"></div>
                    </div>
                </div>
              </div>
              <div class="modal-footer">
                <button id="submitGalleryConfigChangeFromModalButton" type="button" class="btn btn-primary">Save</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
            </div>
          </div>

          <H3 class='mt-4'>Exhibits</H3>
          <i>Exhibits enable you to define a set of content for your gallery.</i>
          <div class="row mt-3">
            <div class="col-6 col-md-3 col-lg-2">
              <button id="showEditGalleryConfigModalButton" type="button" class="btn btn-primary w-100" id="editConfigButton">Edit Settings</button>
            </div>
            <div class="col-6 col-md-3 col-lg-2">
              <button type="button" class="btn btn-primary w-100" id="reloadConfigurationButton">Reload Settings</button>
            </div>
            <div class="col-6 col-md-4 col-lg-3">
              <div class="form-group">
                <label for="exhibitSelect">Set current exhibit</label>
                <select class="form-control" id="exhibitSelect"></select>
              </div>
            </div>
            <div class="col-12 col-md-8">
              <div class="form-group">
                <label for="createExhibitNameInput">Create new exhibit</label>
                <div class='row'>
                  <div class='col-12 col-lg-5 pr-1 mt-1'>
                    <input type="text" id='createExhibitNameInput' class='form-control' placeholder="Enter exhibit name"></input>
                  </div>
                  <div class='col-6 col-lg-3 mt-1'>
                    <button id="createExhibitButton" class='btn btn-primary w-100'>Create Empty</button>
                  </div>
                  <div id="cloneExhibitButton" class='col-6 col-lg-3 mt-1'>
                    <button class='btn btn-primary w-100'>Clone Current</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-sm-6 col-md-4">
              <div class="form-group">
                  <label for="exhibitDeleteSelector">Delete exhibit</label>
                <div class="row">
                  <div class='col-7'>
                    <select class="form-control text-danger w-100" id="exhibitDeleteSelector"></select>
                  </div>
                  <div class='col-5'>
                    <button class='btn btn-danger w-100' id="exhibitDeleteSelectorButton">Delete</button>
                  </div>
                  <div class='col-12 mt-1'>
                    <span class='text-danger' id="exhibitDeleteSelectorWarning">Cannot delete current exhibit</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <hr>
          <H3 class='mt-2'>Flexible Tracker</H3>
          <i>With Flexible Tracker, you can create custom interfaces for surveys and evaluations.</i>
          <div class="row mt-3">
            <div class='col-6 col-md-5 col-lg-4 col-xl-3'>
              <input type="text" id='createTrackerTemplateName' class='form-control' placeholder="Enter template name"></input>
            </div>
            <div class="col-6 col-md-3 col-lg-3 col-xl-2">
              <button id="createTrackerTemplateButton" class='btn btn-primary w-100'>Create template</button>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-12 mt-2">
              <H4>Templates</H4>
              <i>Templates define the layout of a Flexible Tracker data collection interface.</i>
            </div>
            <div class="col-6 col-md-2 mt-2">
              <select id="trackerTemplateSelect" class="form-control"></select>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="launchTrackerButton" class='btn btn-primary w-100'>Launch</button>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="showEditTrackerTemplateButton" class='btn btn-info w-100'>Edit</button>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="deleteTrackerTemplateButton" class='btn btn-danger w-100'>Delete</button>
            </div>
          </div>
          <div class='row mt-3'>
            <div class="col-12 mt-2">
              <H4>Data</H4>
              <i>Download data collected by Flexible Tracker or deposited by another Constellation-compatible app.</i>
            </div>
            <div class="col-6 col-md-2 mt-2">
              <select id="trackerDataSelect" class="form-control"></select>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="getAvailableTrackerDataButton" class='btn btn-primary w-100'>Refresh</button>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="downloadTrackerDataButton" class='btn btn-info w-100'>Download</button>
            </div>
            <div class="col-6 col-md-3 col-lg-2 col-xl-2 mt-2">
              <button id="showDeleteTrackerDataModalButton" class='btn btn-danger w-100'>Delete</button>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="nav-help" role="tabpanel" aria-labelledby="nav-help-tab">
          <div class="row mt-4">
            <div id='helpTextDiv' class='col-auto'>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script type="text/javascript" src="js/jquery-3.5.1.slim.min.js"></script>
    <script type="text/javascript" src="js/popper.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/showdown.min.js"></script>

    <!-- This must be above the importing of webpage.js so that serverIP is available -->
    <script>
      // This will be automatically inserted by the server before being sent to the client
      var serverIP = INSERT_SERVERIP_HERE 
    </script>
    <!-- <script type="module" src="tracker_tools.js"></script> -->
    <script type="module" src="webpage.js"></script>



  </body>
</html>
